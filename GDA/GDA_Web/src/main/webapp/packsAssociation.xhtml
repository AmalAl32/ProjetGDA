<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="fr"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<!-- c la page qui affiche la liste des packs d une association données -->	
	<h:body>

      <ui:composition template="/templates/commonAssociation.xhtml">
      	
      	<ui:define name="title">Liste packs association</ui:define>
      	
      	<ui:define name="css">
      		<h:outputStylesheet name="css/style.css" />
      		<h:outputStylesheet name="css/associations.css" />
      		
		</ui:define>
		
        <ui:define name="content">
 
      
      	<h:form id="form">

			    	<p:dataGrid var="pack" value="#{listePacksAssociationBean.packs}" columns="3" layout="grid"
				        rows="5"  id="pack">
				 
				        <f:facet name="header">
				            Liste des packs en ligne
				        </f:facet>
			 
			        	<p:panel header="#{pack.libelle}" style="text-align:center">
			            	<h:panelGrid columns="1" style="width:100%">
			                	<p:graphicImage name="img/#{pack.typeProduit.type}.jpg" height="109" width="135"/>
			                	<h:outputText value="€#{pack.prix}" />
			                
				                <p:commandLink update=":form:packDetail" oncomplete="PF('packDialog').show()" title="Detail du pack">
				                    <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;" />
				                    <f:setPropertyActionListener value="#{pack}" target="#{packFiltrageBean.selectedPackAssociation}" />
				                </p:commandLink>		                
				                						    	                

			               </h:panelGrid>
			               <p:growl id="growl" life="2000" />
 							<p:growl id="Confirmation" showDetail="true" />
 
						    <p:commandButton value="Supprimer" actionListener="#{listePacksAssociationBean.supprimerPack()}" update="pack">
						        <p:confirm header="Confirmation" message="Etes-vous sûr de vouloir supprimer ce pack ?" icon="ui-icon-alert" />
						    </p:commandButton>
						 
						    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
						        <p:commandButton value="Oui" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
						        <p:commandButton value="Non" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
						    </p:confirmDialog>
						    
						    <p:commandButton value="Modifier" id="modifPack" update="growl" actionListener="#" styleClass="ui-priority-primary" />
						 
			             </p:panel> 
			          </p:dataGrid>
		                <p:dialog header="Detail du pack" widgetVar="packDetail" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
			        		<p:outputPanel id="packDetail" style="text-align:center;">
			            	<p:panelGrid  columns="2" rendered="#{not empty packFiltrageBean.listeProduits}" columnClasses="label,value">
				                <f:facet name="header">
				                </f:facet>	
				                 <h:outputText value="" />                
				                 <h:outputText value="#{PackFiltrageBean.listeProduits.id} " style="color:blue"/>               
				                 <h:outputText value="" /> 
				                 <h:outputText value="#{PackFiltrageBean.listeProduits.libelle} " style="color:blue" />
				                 <h:outputText value="" /> 
				                 <h:outputText value="#{PackFiltrageBean.listeProduits.prix}" style="color:blue" />
				                 <h:outputText value="" /> 
					         </p:panelGrid>
					        </p:outputPanel>
					    </p:dialog> 
		 	</h:form>

	       </ui:define>      
	      </ui:composition>
	     
	   </h:body>	

</html>